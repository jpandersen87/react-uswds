{"version":3,"file":"utils.js","sources":["../../../libSrc/components/modal/utils.ts"],"sourcesContent":["import React, { useState } from 'react'\n\nexport type ModalHook = {\n  isOpen: boolean\n  toggleModal: (e?: React.MouseEvent, open?: boolean) => boolean\n}\n\nexport const useModal = (isInitiallyOpen?: boolean): ModalHook => {\n  const [isOpen, setIsOpen] = useState(isInitiallyOpen || false)\n\n  const allowToggle = (e: React.MouseEvent): boolean => {\n    const clickedElement = e.target as Element\n\n    if (e && clickedElement) {\n      if (clickedElement.closest('.usa-modal')) {\n        // Element is inside a modal\n\n        // Only allow toggle if element is a close button, don't allow opening a modal from with a modal\n        return (\n          clickedElement.hasAttribute('[data-close-modal]') ||\n          !!clickedElement.closest('[data-close-modal]')\n        )\n      }\n    }\n\n    return true\n  }\n\n  const toggleModal = (e?: React.MouseEvent, open?: boolean): boolean => {\n    if (e && !allowToggle(e)) {\n      e.stopPropagation()\n      return false\n    }\n\n    if (open === true) setIsOpen(true)\n    else if (open === false) setIsOpen(false)\n    else {\n      setIsOpen((state) => !state)\n    }\n\n    return true\n  }\n\n  return { isOpen, toggleModal }\n}\n\nexport const getScrollbarWidth = (): string => {\n  // Only run in browser\n  if (typeof document !== 'undefined') {\n    const outer = document.createElement('div')\n\n    outer.setAttribute(\n      'style',\n      'visibility: hidden; overflow: scroll; ms-overflow-style: scrollbar'\n    )\n\n    document.body.appendChild(outer)\n\n    const inner = document.createElement('div')\n    outer.appendChild(inner)\n\n    const scrollbarWidth = `${outer.offsetWidth - inner.offsetWidth}px`\n    outer.parentNode?.removeChild(outer)\n\n    return scrollbarWidth\n  }\n\n  return ''\n}\n"],"names":["useModal","isInitiallyOpen","isOpen","setIsOpen","useState","allowToggle","e","clickedElement","open","state","getScrollbarWidth","outer","inner","scrollbarWidth","_a"],"mappings":";AAOa,MAAAA,IAAW,CAACC,MAAyC;AAChE,QAAM,CAACC,GAAQC,CAAS,IAAIC,EAASH,KAAmB,EAAK,GAEvDI,IAAc,CAACC,MAAiC;AACpD,UAAMC,IAAiBD,EAAE;AAEzB,WAAIA,KAAKC,KACHA,EAAe,QAAQ,YAAY,IAKnCA,EAAe,aAAa,oBAAoB,KAChD,CAAC,CAACA,EAAe,QAAQ,oBAAoB,IAK5C;AAAA,EAAA;AAkBF,SAAA,EAAE,QAAAL,GAAQ,aAfG,CAACI,GAAsBE,MACrCF,KAAK,CAACD,EAAYC,CAAC,KACrBA,EAAE,gBAAgB,GACX,OAGUH,EAAfK,MAAS,KAAgB,KACpBA,MAAS,KAAiB,KAEvB,CAACC,MAAU,CAACA,CAHS,GAM1B;AAIX,GAEaC,IAAoB,MAAc;;AAEzC,MAAA,OAAO,WAAa,KAAa;AAC7B,UAAAC,IAAQ,SAAS,cAAc,KAAK;AAEpC,IAAAA,EAAA;AAAA,MACJ;AAAA,MACA;AAAA,IAAA,GAGO,SAAA,KAAK,YAAYA,CAAK;AAEzB,UAAAC,IAAQ,SAAS,cAAc,KAAK;AAC1C,IAAAD,EAAM,YAAYC,CAAK;AAEvB,UAAMC,IAAiB,GAAGF,EAAM,cAAcC,EAAM,WAAW;AACzD,YAAAE,IAAAH,EAAA,eAAA,QAAAG,EAAY,YAAYH,IAEvBE;AAAA,EACT;AAEO,SAAA;AACT;"}